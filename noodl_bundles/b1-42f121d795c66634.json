[{"name":"/#Posts/Posts","nodes":[{"id":"d4eaeffe-6f20-b7d9-869c-fa806c10402a","type":"Page","parameters":{},"ports":[],"children":[{"id":"ba264610-e720-50de-8389-52b4931ceb2c","type":"Group","variant":"Page Container","parameters":{"flexDirection":"column","clip":true,"sizeMode":"explicit","justifyContent":"flex-start"},"stateParameters":{},"stateTransitions":{},"defaultStateTransitions":{},"ports":[],"children":[{"id":"2374f1cf-3dc0-5220-9f73-b6fd8552459f","type":"/#Posts/Post List View","parameters":{},"ports":[],"children":[]}]}]},{"id":"0ffc0ca3-2659-0a02-0a0d-698e7a7dd8f6","type":"PageInputs","parameters":{"queryParams":"p,s","pathParams":"member"},"ports":[],"children":[]}],"connections":[{"sourceId":"0ffc0ca3-2659-0a02-0a0d-698e7a7dd8f6","sourcePort":"pm-p","targetId":"2374f1cf-3dc0-5220-9f73-b6fd8552459f","targetPort":"Pagination Index"},{"sourceId":"0ffc0ca3-2659-0a02-0a0d-698e7a7dd8f6","sourcePort":"pm-member","targetId":"2374f1cf-3dc0-5220-9f73-b6fd8552459f","targetPort":"Member"},{"sourceId":"0ffc0ca3-2659-0a02-0a0d-698e7a7dd8f6","sourcePort":"pm-s","targetId":"2374f1cf-3dc0-5220-9f73-b6fd8552459f","targetPort":"Sort Ascending"}],"ports":[],"roots":["d4eaeffe-6f20-b7d9-869c-fa806c10402a"],"metadata":{"canvasPos":{"x":2578.7790084524427,"y":-31.820470768144315}}},{"name":"/#Posts/Post List View","nodes":[{"id":"8ea3fd31-345f-f197-6985-60674e7c8230","type":"Group","parameters":{},"ports":[],"children":[{"id":"0be62887-c9ff-4097-2177-756e4690b701","type":"/#Posts/Post Filter Header","parameters":{},"ports":[],"children":[]},{"id":"c55a233b-730f-b43d-2f7a-253f4edbfaca","type":"Group","parameters":{"sizeMode":"explicit","clip":true,"scrollEnabled":true},"ports":[],"children":[{"id":"e8ad99ca-0d55-0364-3c82-e5ba34234354","type":"/Post Table","parameters":{"CurrentSortingField":"published","SortingDescending":true},"ports":[],"children":[]}]},{"id":"2d1daac8-7c4e-43ef-6c87-8403c46009ff","type":"/Components/Pagination Control","parameters":{"Alignment X":"center","Step":20,"Margin Top":{"value":10,"unit":"px"}},"ports":[],"children":[]}]},{"id":"9af0c5d4-d256-2136-ba39-bf40c4f35a5b","type":"DbCollection2","parameters":{"collectionName":"Post","storageFilterType":"json","storageJSONFilter":"// Write your query script here, check out the reference documentation for examples\nconst memberFilterEnabled = Inputs.MemberFilterEnabled;\nconst memberFilter = Inputs.MemberFilter;\nconst textFilterEnabled = Inputs.TextFilterEnabled;\nconst textFilter = Inputs.TextFilter;\nconst sortAscending = Inputs.SortAscending;\n\nconst filters = [];\n\nif (memberFilterEnabled === true) {\n    const filter = {member:{pointsTo:memberFilter}};\n    filters.push (filter);\n}\nif (textFilterEnabled === true) {\n    const filter = {title:{matchesRegex:textFilter, options:'i'}};\n    filters.push (filter);\n}\nif (filters.length === 0) {\n    where({});\n}\nelse if (filters.length === 1) {\n    where(filters[0]);\n}\nelse {\n    where({and:filters});\n}\n\nif (sortAscending === true) {\n    sort(['-published'])\n}\nelse {\n    sort(['published'])\n}","storageEnableLimit":true,"storageLimit":20},"ports":[],"children":[]},{"id":"88919748-cd2e-dd3c-efcd-cfe3945e981a","type":"RouterNavigate","parameters":{"router":"main","target":"/#Post Info/Post Info"},"ports":[],"children":[]},{"id":"d2ec4119-d509-8185-f5d3-299592081b65","type":"Component Inputs","parameters":{},"ports":[],"children":[]},{"id":"2ce971a5-0894-afd4-cf41-e0d0cceeb601","type":"Expression","parameters":{"expression":"p_index\n"},"ports":[],"children":[]},{"id":"1893b913-e72f-37c0-a8b9-7788cf9b35cd","type":"RouterNavigate","parameters":{"router":"main","target":"/#Posts/Posts"},"ports":[],"children":[]},{"id":"25bad149-3822-f999-155a-016b751f4128","type":"JavaScriptFunction","parameters":{"functionScript":"if (Inputs.Member === undefined || Inputs.Member === \"ALL\") {\n    Outputs.MemberFilterEnabled = false;\n}\nelse {\n    Outputs.MemberFilterEnabled = true;\n}\n\nif (Inputs.SortAscending === undefined || Inputs.SortAscending === true) {\n    Outputs.SortAscending = true;\n}\nelse {\n    Outputs.SortAscending = false;\n}\nOutputs.Done();"},"ports":[{"name":"in-Member","displayName":"Member","plug":"input","type":"*","group":"Inputs","index":4},{"name":"in-SortAscending","displayName":"SortAscending","plug":"input","type":"*","group":"Inputs","index":5},{"name":"out-Done","displayName":"Done","plug":"output","type":"signal","group":"Outputs","index":6},{"name":"out-MemberFilterEnabled","displayName":"MemberFilterEnabled","plug":"output","type":"*","group":"Outputs","index":7},{"name":"out-SortAscending","displayName":"SortAscending","plug":"output","type":"*","group":"Outputs","index":8}],"children":[]},{"id":"d0f9a76b-fbb3-437a-51df-eea87169c248","type":"RouterNavigate","parameters":{"router":"main","target":"/#Posts/Posts"},"ports":[],"children":[]},{"id":"c17ca4fd-b55e-4bd0-83d2-3452b8cd5af8","type":"Inverter","parameters":{},"ports":[],"children":[]},{"id":"10b2e2ed-76a9-28e3-cc41-0dd222815652","type":"RouterNavigate","parameters":{"router":"main","target":"/#Posts/Posts"},"ports":[],"children":[]},{"id":"fd6c3820-3ec1-ca6a-c0a1-2f902235630a","type":"Inverter","parameters":{},"ports":[],"children":[]},{"id":"b87c1e51-fc28-0d11-1229-337bcca9d70e","type":"Switch","parameters":{},"ports":[],"children":[]},{"id":"e4d8ae41-b996-fd0c-30a9-109433f5b8c0","type":"JavaScriptFunction","parameters":{"functionScript":"const loggedIn = Inputs.LoggedIn;\n\nlet baseHeaders = [{\n    \"Field\":\"title\",\n    \"Label\":\"Post Title\",\n    \"Type\":\"Post\"\n  },\n  {\n    \"Field\":\"member\",\n    \"Label\":\"Author\",\n    \"Type\":\"Member\"\n  },\n  {\n    \"Field\":\"published\",\n    \"Label\":\"Publish Date\",\n    \"Sortable\":true,\n    \"Descending\":true\n  }\n]\nif (loggedIn === true) {\n    baseHeaders.unshift( {\n        \"Field\":\"f\",\n        \"Label\":\"Starred\",\n        \"Type\":\"FavoriteIcon\"\n    });\n}\n\nOutputs.Headers = baseHeaders;"},"ports":[{"name":"in-LoggedIn","displayName":"LoggedIn","plug":"input","type":"*","group":"Inputs","index":4},{"name":"out-Headers","displayName":"Headers","plug":"output","type":"*","group":"Outputs","index":5}],"children":[]},{"id":"d79edab3-4e5f-d54f-315b-ced34ffa0c33","type":"net.noodl.user.User","parameters":{},"ports":[],"children":[]}],"connections":[{"sourceId":"0be62887-c9ff-4097-2177-756e4690b701","sourcePort":"Text Filter Enabled","targetId":"9af0c5d4-d256-2136-ba39-bf40c4f35a5b","targetPort":"storageFilterValue-TextFilterEnabled"},{"sourceId":"0be62887-c9ff-4097-2177-756e4690b701","sourcePort":"Text Filter","targetId":"9af0c5d4-d256-2136-ba39-bf40c4f35a5b","targetPort":"storageFilterValue-TextFilter"},{"sourceId":"9af0c5d4-d256-2136-ba39-bf40c4f35a5b","sourcePort":"count","targetId":"2d1daac8-7c4e-43ef-6c87-8403c46009ff","targetPort":"Last Count"},{"sourceId":"d2ec4119-d509-8185-f5d3-299592081b65","sourcePort":"Pagination Index","targetId":"2ce971a5-0894-afd4-cf41-e0d0cceeb601","targetPort":"p_index"},{"sourceId":"2d1daac8-7c4e-43ef-6c87-8403c46009ff","sourcePort":"Next Start Index","targetId":"1893b913-e72f-37c0-a8b9-7788cf9b35cd","targetPort":"pm-p"},{"sourceId":"2d1daac8-7c4e-43ef-6c87-8403c46009ff","sourcePort":"Switch Page","targetId":"1893b913-e72f-37c0-a8b9-7788cf9b35cd","targetPort":"navigate"},{"sourceId":"2ce971a5-0894-afd4-cf41-e0d0cceeb601","sourcePort":"result","targetId":"9af0c5d4-d256-2136-ba39-bf40c4f35a5b","targetPort":"storageSkip"},{"sourceId":"2ce971a5-0894-afd4-cf41-e0d0cceeb601","sourcePort":"result","targetId":"2d1daac8-7c4e-43ef-6c87-8403c46009ff","targetPort":"Current Start Index"},{"sourceId":"d2ec4119-d509-8185-f5d3-299592081b65","sourcePort":"Member","targetId":"25bad149-3822-f999-155a-016b751f4128","targetPort":"in-Member"},{"sourceId":"25bad149-3822-f999-155a-016b751f4128","sourcePort":"out-MemberFilterEnabled","targetId":"9af0c5d4-d256-2136-ba39-bf40c4f35a5b","targetPort":"storageFilterValue-MemberFilterEnabled"},{"sourceId":"d2ec4119-d509-8185-f5d3-299592081b65","sourcePort":"Member","targetId":"9af0c5d4-d256-2136-ba39-bf40c4f35a5b","targetPort":"storageFilterValue-MemberFilter"},{"sourceId":"d2ec4119-d509-8185-f5d3-299592081b65","sourcePort":"Member","targetId":"0be62887-c9ff-4097-2177-756e4690b701","targetPort":"Selected Member"},{"sourceId":"c17ca4fd-b55e-4bd0-83d2-3452b8cd5af8","sourcePort":"result","targetId":"d0f9a76b-fbb3-437a-51df-eea87169c248","targetPort":"pm-s"},{"sourceId":"d2ec4119-d509-8185-f5d3-299592081b65","sourcePort":"Member","targetId":"1893b913-e72f-37c0-a8b9-7788cf9b35cd","targetPort":"pm-member"},{"sourceId":"d2ec4119-d509-8185-f5d3-299592081b65","sourcePort":"Member","targetId":"d0f9a76b-fbb3-437a-51df-eea87169c248","targetPort":"pm-member"},{"sourceId":"0be62887-c9ff-4097-2177-756e4690b701","sourcePort":"Member Filter","targetId":"10b2e2ed-76a9-28e3-cc41-0dd222815652","targetPort":"pm-member"},{"sourceId":"0be62887-c9ff-4097-2177-756e4690b701","sourcePort":"Member Filter Changed","targetId":"10b2e2ed-76a9-28e3-cc41-0dd222815652","targetPort":"navigate"},{"sourceId":"8ea3fd31-345f-f197-6985-60674e7c8230","sourcePort":"didMount","targetId":"25bad149-3822-f999-155a-016b751f4128","targetPort":"run"},{"sourceId":"25bad149-3822-f999-155a-016b751f4128","sourcePort":"out-Done","targetId":"9af0c5d4-d256-2136-ba39-bf40c4f35a5b","targetPort":"storageFetch"},{"sourceId":"0be62887-c9ff-4097-2177-756e4690b701","sourcePort":" Text Filter Changed","targetId":"9af0c5d4-d256-2136-ba39-bf40c4f35a5b","targetPort":"storageFetch"},{"sourceId":"d2ec4119-d509-8185-f5d3-299592081b65","sourcePort":"Sort Ascending","targetId":"25bad149-3822-f999-155a-016b751f4128","targetPort":"in-SortAscending"},{"sourceId":"25bad149-3822-f999-155a-016b751f4128","sourcePort":"out-SortAscending","targetId":"c17ca4fd-b55e-4bd0-83d2-3452b8cd5af8","targetPort":"value"},{"sourceId":"25bad149-3822-f999-155a-016b751f4128","sourcePort":"out-SortAscending","targetId":"10b2e2ed-76a9-28e3-cc41-0dd222815652","targetPort":"pm-s"},{"sourceId":"25bad149-3822-f999-155a-016b751f4128","sourcePort":"out-SortAscending","targetId":"9af0c5d4-d256-2136-ba39-bf40c4f35a5b","targetPort":"storageFilterValue-SortAscending"},{"sourceId":"9af0c5d4-d256-2136-ba39-bf40c4f35a5b","sourcePort":"items","targetId":"e8ad99ca-0d55-0364-3c82-e5ba34234354","targetPort":"Items"},{"sourceId":"e8ad99ca-0d55-0364-3c82-e5ba34234354","sourcePort":"Sorting Changed","targetId":"d0f9a76b-fbb3-437a-51df-eea87169c248","targetPort":"navigate"},{"sourceId":"25bad149-3822-f999-155a-016b751f4128","sourcePort":"out-SortAscending","targetId":"fd6c3820-3ec1-ca6a-c0a1-2f902235630a","targetPort":"value"},{"sourceId":"fd6c3820-3ec1-ca6a-c0a1-2f902235630a","sourcePort":"result","targetId":"e8ad99ca-0d55-0364-3c82-e5ba34234354","targetPort":"SortingDescending"},{"sourceId":"9af0c5d4-d256-2136-ba39-bf40c4f35a5b","sourcePort":"fetched","targetId":"b87c1e51-fc28-0d11-1229-337bcca9d70e","targetPort":"on"},{"sourceId":"b87c1e51-fc28-0d11-1229-337bcca9d70e","sourcePort":"state","targetId":"c55a233b-730f-b43d-2f7a-253f4edbfaca","targetPort":"mounted"},{"sourceId":"e8ad99ca-0d55-0364-3c82-e5ba34234354","sourcePort":"Item Id","targetId":"88919748-cd2e-dd3c-efcd-cfe3945e981a","targetPort":"pm-PostId"},{"sourceId":"e8ad99ca-0d55-0364-3c82-e5ba34234354","sourcePort":"Item Clicked","targetId":"88919748-cd2e-dd3c-efcd-cfe3945e981a","targetPort":"navigate"},{"sourceId":"d79edab3-4e5f-d54f-315b-ced34ffa0c33","sourcePort":"authenticated","targetId":"e4d8ae41-b996-fd0c-30a9-109433f5b8c0","targetPort":"in-LoggedIn"},{"sourceId":"e4d8ae41-b996-fd0c-30a9-109433f5b8c0","sourcePort":"out-Headers","targetId":"e8ad99ca-0d55-0364-3c82-e5ba34234354","targetPort":"Headers"}],"ports":[{"name":"Pagination Index","type":{"name":"*","editAsType":"string"},"group":"Parameters","plug":"input","index":1},{"name":"Member","type":{"name":"string","allowConnectionsOnly":true},"plug":"input","index":2},{"name":"Sort Ascending","type":"*","group":"Inputs","plug":"input","index":3}],"roots":["8ea3fd31-345f-f197-6985-60674e7c8230"],"metadata":{"canvasPos":{"x":3492.4347008099903,"y":-49.15899338670894}}},{"name":"/#Posts/Post Filter Header","nodes":[{"id":"05265e5e-458b-6eba-edbe-c7af5495a958","type":"Group","parameters":{"flexDirection":"row","sizeMode":"contentHeight","paddingRight":{"value":5,"unit":"px"},"paddingLeft":{"value":5,"unit":"px"},"paddingTop":{"value":10,"unit":"px"},"paddingBottom":{"value":10,"unit":"px"},"marginBottom":{"value":7,"unit":"px"}},"ports":[],"children":[{"id":"1d517e26-a44e-89c6-7441-9dc2a3756804","type":"/Components/Text Filter Box","parameters":{},"ports":[],"children":[]},{"id":"0517ff99-6bd8-f363-ade5-b842208c9dc1","type":"Group","parameters":{"sizeMode":"contentHeight","marginTop":{"value":0,"unit":"px"}},"ports":[],"children":[{"id":"a9915ad6-ddc8-fc34-c290-f45cd5b815de","type":"net.noodl.controls.options","variant":"Basic Dropdown","parameters":{},"stateParameters":{},"stateTransitions":{},"defaultStateTransitions":{},"ports":[],"children":[]}]}]},{"id":"36bb4701-c7e7-b1b0-bd4b-633394b83854","type":"Component Outputs","parameters":{},"ports":[],"children":[]},{"id":"93b8a000-8075-a6db-5246-559ea9afec38","type":"Variable2","parameters":{"name":"memberfilters enabled"},"ports":[],"children":[]},{"id":"091ba3c8-0dc8-5e7d-76f7-85991ccdeda2","type":"Boolean","parameters":{},"ports":[],"children":[]},{"id":"1bdb3fc7-d1a0-b99f-b4c2-c03add268774","type":"Variable2","parameters":{"name":"memberfilters enabled"},"ports":[],"children":[]},{"id":"3c2aab94-a21d-859c-8fc1-7f364d4cae64","type":"Set Variable","parameters":{"name":"memberfilters enabled","setWith":"boolean"},"ports":[],"children":[]},{"id":"5f947732-ba3c-8437-f2e1-c10698d0e71b","type":"Component Inputs","parameters":{},"ports":[],"children":[]},{"id":"49ba375e-17d3-fb16-4b7c-a95d559d9d4f","type":"Variable2","parameters":{"name":"Cached"},"ports":[],"children":[]},{"id":"546230a8-09f6-144a-28e7-85844c4cd50b","type":"Condition","parameters":{},"ports":[],"children":[]},{"id":"ac5fc770-9e03-295b-3733-30bcc4a53a88","type":"Collection2","parameters":{"collectionId":"All Members"},"ports":[],"children":[]},{"id":"d184826a-288c-cd32-7186-169bc54912c2","type":"Event Receiver","parameters":{"channelName":"Caching Done"},"ports":[],"children":[]},{"id":"55707d3a-a046-6d40-d748-101633fe858d","type":"JavaScriptFunction","parameters":{"functionScript":"const members = Inputs.MemberItems;\nconst selectedItem = Inputs.SelectedItemId;\n\nif (members !== undefined && members.length > 0) {\n    // make an output array\n    const filterArray = members.map (member => Noodl.Object.create (\n        {\n            Label: member.blogger_name,\n            Value: member.id\n        }\n    ));\n    // add in All object\n    filterArray.unshift ( Noodl.Object.create ({\n        Label:\"All\",\n        Value:\"ALL\"\n    }));\n    Outputs.FilterArray = filterArray;\n    if (selectedItem === undefined) {\n        Outputs.SelectedItemValue = \"ALL\";\n    }\n    else {\n        Outputs.SelectedItemValue = selectedItem;\n    }\n    Outputs.Done();\n}\n"},"ports":[{"name":"in-MemberItems","displayName":"MemberItems","plug":"input","type":"*","group":"Inputs","index":4},{"name":"in-SelectedItemId","displayName":"SelectedItemId","plug":"input","type":"*","group":"Inputs","index":5},{"name":"out-Done","displayName":"Done","plug":"output","type":"signal","group":"Outputs","index":6},{"name":"out-FilterArray","displayName":"FilterArray","plug":"output","type":"*","group":"Outputs","index":7},{"name":"out-SelectedItemValue","displayName":"SelectedItemValue","plug":"output","type":"*","group":"Outputs","index":8}],"children":[]}],"connections":[{"sourceId":"1d517e26-a44e-89c6-7441-9dc2a3756804","sourcePort":"Text Filter Enabled","targetId":"36bb4701-c7e7-b1b0-bd4b-633394b83854","targetPort":"Text Filter Enabled"},{"sourceId":"1d517e26-a44e-89c6-7441-9dc2a3756804","sourcePort":"Text Filter","targetId":"36bb4701-c7e7-b1b0-bd4b-633394b83854","targetPort":"Text Filter"},{"sourceId":"091ba3c8-0dc8-5e7d-76f7-85991ccdeda2","sourcePort":"savedValue","targetId":"93b8a000-8075-a6db-5246-559ea9afec38","targetPort":"value"},{"sourceId":"1bdb3fc7-d1a0-b99f-b4c2-c03add268774","sourcePort":"value","targetId":"36bb4701-c7e7-b1b0-bd4b-633394b83854","targetPort":"Member Filter Enabled"},{"sourceId":"1d517e26-a44e-89c6-7441-9dc2a3756804","sourcePort":"Filter Changed","targetId":"36bb4701-c7e7-b1b0-bd4b-633394b83854","targetPort":" Text Filter Changed"},{"sourceId":"3c2aab94-a21d-859c-8fc1-7f364d4cae64","sourcePort":"done","targetId":"36bb4701-c7e7-b1b0-bd4b-633394b83854","targetPort":"Member Filter Changed"},{"sourceId":"a9915ad6-ddc8-fc34-c290-f45cd5b815de","sourcePort":"onChange","targetId":"3c2aab94-a21d-859c-8fc1-7f364d4cae64","targetPort":"do"},{"sourceId":"a9915ad6-ddc8-fc34-c290-f45cd5b815de","sourcePort":"value","targetId":"36bb4701-c7e7-b1b0-bd4b-633394b83854","targetPort":"Member Filter"},{"sourceId":"49ba375e-17d3-fb16-4b7c-a95d559d9d4f","sourcePort":"value","targetId":"546230a8-09f6-144a-28e7-85844c4cd50b","targetPort":"condition"},{"sourceId":"05265e5e-458b-6eba-edbe-c7af5495a958","sourcePort":"didMount","targetId":"546230a8-09f6-144a-28e7-85844c4cd50b","targetPort":"eval"},{"sourceId":"d184826a-288c-cd32-7186-169bc54912c2","sourcePort":"eventReceived","targetId":"546230a8-09f6-144a-28e7-85844c4cd50b","targetPort":"eval"},{"sourceId":"546230a8-09f6-144a-28e7-85844c4cd50b","sourcePort":"ontrue","targetId":"55707d3a-a046-6d40-d748-101633fe858d","targetPort":"run"},{"sourceId":"ac5fc770-9e03-295b-3733-30bcc4a53a88","sourcePort":"items","targetId":"55707d3a-a046-6d40-d748-101633fe858d","targetPort":"in-MemberItems"},{"sourceId":"55707d3a-a046-6d40-d748-101633fe858d","sourcePort":"out-FilterArray","targetId":"a9915ad6-ddc8-fc34-c290-f45cd5b815de","targetPort":"items"},{"sourceId":"5f947732-ba3c-8437-f2e1-c10698d0e71b","sourcePort":"Selected Member","targetId":"55707d3a-a046-6d40-d748-101633fe858d","targetPort":"in-SelectedItemId"},{"sourceId":"55707d3a-a046-6d40-d748-101633fe858d","sourcePort":"out-SelectedItemValue","targetId":"a9915ad6-ddc8-fc34-c290-f45cd5b815de","targetPort":"value"}],"ports":[{"name":"Text Filter Enabled","type":"boolean","plug":"output","index":1},{"name":"Selected Member","type":"*","group":"Inputs","plug":"input","index":1},{"name":"Text Filter","type":"string","plug":"output","index":2},{"name":"Member Filter Enabled","type":"*","plug":"output","index":3},{"name":"Member Filter","type":"string","plug":"output","index":4},{"name":"Member Filter Changed","type":"signal","plug":"output","index":5},{"name":" Text Filter Changed","type":{"name":"signal"},"plug":"output","index":6}],"roots":["05265e5e-458b-6eba-edbe-c7af5495a958"],"metadata":{"canvasPos":{"x":1834.0370134570376,"y":-51.75652107802337},"canvasSize":{"width":"385px","height":"375px"}}}]